<ul class="breadcrumb">
  <li><a href="#/index">Home</a></li>
  <li><a href="#/messaging">Apps</a></li>
  <li><a href='#/messaging/{{currentApp.id}}/index'>{{currentApp.name}}</a></li>
  <li class='active'>Devices</li>
  <li class='active'>{{instance.name || instance.id}}</li>
</ul>

<div class="page-header">
  <h1>Device</h1>
  <a class="btn btn-primary" ng-href="#/messaging/{{currentApp.id}}/device/{{instance.id}}/edit">
    <i class="fa fa-pencil"></i>
    Edit
  </a>
</div>

<div class="alert alert-danger" ng-if="error">
  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
  <strong>Error.</strong><span ng-if="!errorMessage">An unexpected error was encountered</span><span ng-if="errorMessage">{{errorMessage}}</span>
</div>

<table class="table table-striped table-hover" condensed="false" hover="true" striped="true">
  <tbody>
    <tr>
      <td>Id</td>
      <td>{{instance.id}}</td>
    </tr>
    <tr>
      <td>Identifier</td>
      <td>{{instance.identifier}}</td>
    </tr>
    <tr>
      <td>Provider</td>
      <td>{{instance.provider}}</td>
    </tr>
  </tbody>
</table>

<div class='panel panel-default panel-messaging'>
  <div class='panel-heading'>
    <h5 class='panel-title'>Channels</h5>
  </div>
  <div class='panel-body'>
    <div class='form-inline subscribe-form'>
      <select class='form-control select' ng-options="channel as channel.name for channel in channels track by channel.id" ng-model='selectedChannel'></select>
      <div class='btn-group'>
        <a type='button' class='btn btn-success' ng-click='subscribe()'><i class="fa fa-plus"></i> Subscribe</a>
      </div>
    </div>
    <table class='table table-striped table-full' ng-if="instance.channels.length > 0">
      <thead>
      <tr>
        <th>Channel Name</th>
        <th></th>
      </tr>
      </thead>
      <tr ng-repeat="channel in instance.channels">
        <td>{{channel.name}}</td>
        <td>
          <div class='form-inline unsubscribe-form'>
            <div class='btn-group pull-right'>
            <a type='button' class='btn btn-danger' ng-click='unsubscribe(channel.name)'><i class="fa fa-minus"></i> Unsubscribe</a>
            </div>
          </div>
        </td>
      </tr>
    </table>
    <div class='alert alert-info'ng-if="instance.channels.length === 0">
      No Channels
    </div>
  </div>
</div>
